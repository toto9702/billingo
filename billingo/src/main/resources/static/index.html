<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billingo Sz√°ml√°z√≥</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/calendar.css">
</head>
<body>
<nav class="navbar">
    <div class="nav-container">
        <div class="logo">üíº Billingo Sz√°ml√°z√≥</div>
        <ul class="nav-menu">
            <li class="nav-item dropdown">
                <a href="#" class="nav-link">Partner ‚ñº</a>
                <div class="dropdown-content">
                    <button class="dropdown-btn" onclick="showSection('save')">
                        <span class="icon">‚ûï</span> Partner ment√©se
                    </button>
                    <button class="dropdown-btn" onclick="showSection('update')">
                        <span class="icon">‚úèÔ∏è</span> Partner friss√≠t√©se
                    </button>
                    <button class="dropdown-btn" onclick="showSection('list')">
                        <span class="icon">üìã</span> Partnerek list√°z√°sa
                    </button>
                </div>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="showSection('calendar')">üìÖ Napt√°r</a>
            </li>
        </ul>
    </div>
</nav>

<main class="main-content">
    <!-- WELCOME SECTION -->
    <section id="welcome" class="section active">
        <div class="welcome-card">
            <h1>üéâ √údv√∂z√∂lj√ºk a Billingo Sz√°ml√°z√≥ Rendszerben!</h1>
            <p>V√°lasszon egy m≈±veletet a fels≈ë men√ºb≈ël a partnerek kezel√©s√©hez vagy nyissa meg a napt√°rat az √≥r√°k kezel√©s√©hez.</p>
        </div>
    </section>

    <!-- SAVE PARTNER SECTION -->
    <section id="save" class="section">
        <div class="form-container">
            <h2>‚ûï √öj Partner Ment√©se</h2>
            <form id="saveForm" class="partner-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="save-name">N√©v *</label>
                        <input type="text" id="save-name" name="name" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="save-email">Email *</label>
                        <input type="email" id="save-email" name="email" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="save-postalCode">Ir√°ny√≠t√≥sz√°m *</label>
                        <input type="text" id="save-postalCode" name="postalCode"
                               pattern="\d{4}" maxlength="4" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="save-city">V√°ros *</label>
                        <input type="text" id="save-city" name="city" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group full-width">
                        <label for="save-address">C√≠m *</label>
                        <input type="text" id="save-address" name="address" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="save-taxCode">Ad√≥sz√°m</label>
                        <input type="text" id="save-taxCode" name="taxCode">
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="save-price">√År (Ft) *</label>
                        <input type="number" id="save-price" name="price" min="0" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group full-width">
                        <label for="save-studentNames">Hallgat√≥k nevei (vessz≈ë elv√°lasztva) *</label>
                        <input type="text" id="save-studentNames" name="studentNames"
                               placeholder="pl: Kiss J√°nos, Nagy P√©ter" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group checkbox-group">
                        <label>
                            <input type="checkbox" id="save-isActive" name="isActive" checked>
                            <span>Akt√≠v partner</span>
                        </label>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">üíæ Ment√©s</button>
                    <button type="reset" class="btn btn-secondary">üîÑ T√∂rl√©s</button>
                </div>
            </form>
            <div id="save-message" class="message"></div>
        </div>
    </section>

    <!-- UPDATE PARTNER SECTION -->
    <section id="update" class="section">
        <div class="form-container">
            <h2>‚úèÔ∏è Partner Friss√≠t√©se</h2>
            <form id="updateForm" class="partner-form">
                <div class="form-group full-width highlight">
                    <label for="update-currentEmail">V√°lasszon partnert email c√≠m alapj√°n *</label>
                    <select id="update-currentEmail" name="currentEmail" required>
                        <option value="">-- V√°lasszon email c√≠met --</option>
                    </select>
                    <span class="error-message"></span>
                </div>

                <hr class="divider">

                <div class="form-grid">
                    <div class="form-group">
                        <label for="update-name">√öj N√©v *</label>
                        <input type="text" id="update-name" name="name" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="update-email">√öj Email *</label>
                        <input type="email" id="update-email" name="email" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="update-postalCode">Ir√°ny√≠t√≥sz√°m *</label>
                        <input type="text" id="update-postalCode" name="postalCode"
                               pattern="\d{4}" maxlength="4" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="update-city">V√°ros *</label>
                        <input type="text" id="update-city" name="city" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group full-width">
                        <label for="update-address">C√≠m *</label>
                        <input type="text" id="update-address" name="address" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="update-taxCode">Ad√≥sz√°m</label>
                        <input type="text" id="update-taxCode" name="taxCode">
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="update-price">√År (Ft) *</label>
                        <input type="number" id="update-price" name="price" min="0" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group full-width">
                        <label for="update-studentNames">Hallgat√≥k nevei *</label>
                        <input type="text" id="update-studentNames" name="studentNames" required>
                        <span class="error-message"></span>
                    </div>

                    <div class="form-group checkbox-group">
                        <label>
                            <input type="checkbox" id="update-isActive" name="isActive" checked>
                            <span>Akt√≠v partner</span>
                        </label>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">üîÑ Friss√≠t√©s</button>
                    <button type="reset" class="btn btn-secondary">üóëÔ∏è T√∂rl√©s</button>
                </div>
            </form>
            <div id="update-message" class="message"></div>
        </div>
    </section>

    <!-- LIST PARTNERS SECTION -->
    <section id="list" class="section">
        <div class="list-container">
            <h2>üìã Partnerek List√°ja</h2>
            <div class="list-actions">
                <button class="btn btn-primary" onclick="loadPartners()">
                    üîÑ Friss√≠t√©s
                </button>
                <input type="text" id="search" class="search-input"
                       placeholder="üîç Keres√©s n√©v vagy email alapj√°n..."
                       oninput="filterPartners()">
            </div>
            <div id="partners-list" class="partners-grid"></div>
            <div id="list-message" class="message"></div>
        </div>
    </section>

    <section id="calendar" class="section">
        <div class="calendar-container">
            <div class="calendar-header">
                <h2>üìÖ √ìrarend Napt√°r</h2>
                <div class="calendar-navigation">
                    <button class="nav-btn" onclick="previousWeek()">‚óÄ El≈ëz≈ë h√©t</button>
                    <button class="nav-btn" onclick="goToToday()">üìç Mai nap</button>
                    <span class="current-week" id="current-week"></span>
                    <button class="nav-btn" onclick="nextWeek()">K√∂vetkez≈ë h√©t ‚ñ∂</button>
                </div>
            </div>
            <!-- ‚úÖ WRAPPER HOZZ√ÅADVA -->
            <div class="calendar-wrapper">
                <div class="calendar-grid" id="calendar-grid"></div>
            </div>
        </div>
    </section>
</main>

<!-- LESSON MODAL - M√ìDOS√çTOTT FORM -->
<div class="modal-overlay" id="lesson-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modal-title">‚ûï √öj √≥ra felv√©tele</h3>
            <button class="modal-close" onclick="closeLessonModal()">√ó</button>
        </div>
        <div class="modal-body">
            <div class="selected-datetime" id="selected-datetime"></div>

            <form id="lesson-form" onsubmit="saveLessonFromModal(event)">
                <input type="hidden" id="lesson-id">
                <!-- ‚úÖ √öJ: isRetained √©rt√©k t√°rol√°sa -->
                <input type="hidden" id="lesson-is-retained" value="false">

                <div class="datetime-inputs">
                    <div class="form-group">
                        <label for="lesson-date">D√°tum *</label>
                        <input type="date" id="lesson-date" name="date" required>
                    </div>
                    <div class="form-group">
                        <label for="lesson-time">Id≈ëpont *</label>
                        <input type="time" id="lesson-time" name="time" required>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="lesson-student">Tanul√≥ neve *</label>
                        <select id="lesson-student" name="studentName" required
                                onchange="loadPartnersByStudent(this.value)">
                            <option value="">-- V√°lasszon tanul√≥t --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="lesson-partner">Partner neve *</label>
                        <select id="lesson-partner" name="partnerName" required>
                            <option value="">-- El≈ësz√∂r v√°lasszon tanul√≥t --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="lesson-subject">Tant√°rgy *</label>
                        <select id="lesson-subject" name="subject" required>
                            <option value="">-- V√°lasszon tant√°rgyat --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="lesson-duration">Id≈ëtartam *</label>
                        <select id="lesson-duration" name="duration" required>
                            <option value="">-- V√°lasszon id≈ëtartamot --</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label for="lesson-type">T√≠pus *</label>
                        <input type="text" id="lesson-type" name="type" value="√≥ra" required>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">üíæ Ment√©s</button>
                    <button type="button" class="btn btn-secondary" onclick="closeLessonModal()">‚ùå M√©gse</button>
                </div>
            </form>
        </div>
    </div>
</div>



<footer class="footer">
    <p>&copy; 2024 Billingo Sz√°ml√°z√≥ Rendszer</p>
</footer>

<script src="js/app.js"></script>
<script src="js/calendar.js"></script>
</body>
</html>
